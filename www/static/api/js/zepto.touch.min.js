(function(L){var B={},I,G,C,F,H=750,N;function A(Q,O,R,P){return Math.abs(Q-O)>=Math.abs(R-P)?(Q-O>0?"Left":"Right"):(R-P>0?"Up":"Down")}function D(){F=null;if(B.last){B.el.trigger("longTap");B={}}}function K(){if(F){clearTimeout(F)}F=null}function M(){if(I){clearTimeout(I)}if(G){clearTimeout(G)}if(C){clearTimeout(C)}if(F){clearTimeout(F)}I=G=C=F=null;B={}}function E(O){return(O.pointerType=="touch"||O.pointerType==O.MSPOINTER_TYPE_TOUCH)&&O.isPrimary}function J(P,O){return(P.type=="pointer"+O||P.type.toLowerCase()=="mspointer"+O)}L(document).ready(function(){var T,P,S=0,R=0,O,Q;if("MSGesture" in window){N=new MSGesture();N.target=document.body}L(document).bind("MSGestureEnd",function(V){var U=V.velocityX>1?"Right":V.velocityX<-1?"Left":V.velocityY>1?"Down":V.velocityY<-1?"Up":null;if(U){B.el.trigger("swipe");B.el.trigger("swipe"+U)}}).on("touchstart MSPointerDown pointerdown",function(U){if((Q=J(U,"down"))&&!E(U)){return}O=Q?U:U.touches[0];if(U.touches&&U.touches.length===1&&B.x2){B.x2=undefined;B.y2=undefined}T=Date.now();P=T-(B.last||T);B.el=L("tagName" in O.target?O.target:O.target.parentNode);I&&clearTimeout(I);B.x1=O.pageX;B.y1=O.pageY;if(P>0&&P<=250){B.isDoubleTap=true}B.last=T;F=setTimeout(D,H);if(N&&Q){N.addPointer(U.pointerId)}}).on("touchmove MSPointerMove pointermove",function(U){if((Q=J(U,"move"))&&!E(U)){return}O=Q?U:U.touches[0];K();B.x2=O.pageX;B.y2=O.pageY;S+=Math.abs(B.x1-B.x2);R+=Math.abs(B.y1-B.y2)}).on("touchend MSPointerUp pointerup",function(U){if((Q=J(U,"up"))&&!E(U)){return}K();if((B.x2&&Math.abs(B.x1-B.x2)>30)||(B.y2&&Math.abs(B.y1-B.y2)>30)){C=setTimeout(function(){B.el.trigger("swipe");B.el.trigger("swipe"+(A(B.x1,B.x2,B.y1,B.y2)));B={}},0)}else{if("last" in B){if(S<30&&R<30){G=setTimeout(function(){var V=L.Event("tap");V.cancelTouch=M;B.el.trigger(V);if(B.isDoubleTap){if(B.el){B.el.trigger("doubleTap")}B={}}else{I=setTimeout(function(){I=null;if(B.el){B.el.trigger("singleTap")}B={}},250)}},0)}else{B={}}}}S=R=0}).on("touchcancel MSPointerCancel pointercancel",M);L(window).on("scroll",M)});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(O){L.fn[O]=function(P){return this.on(O,P)}})})(Zepto);